#
# Configure XRootD hosts to utilize the OSG monitoring endpoints.
#
# **********************************************************************
# * WARNING: DO NOT EDIT THIS FILE.  IT WILL BE OVERWRITTEN ON UPGRADE *
# **********************************************************************
#
# This file is part of the OSG XRootD packaging

all.sitename $(resourcename)

# If a shoveler is configured send the monitoring data to it, otherwise send it
# directly to the osg xrootd monitoring collector
if defined ?ShovelerHostPort
   # do nothing
else
   set ShovelerHostPort = xrd-mon.osgstorage.org:9930
fi

if defined ?DisableOsgMonitoring
   # do nothing
else
   xrd.report xrd-report.osgstorage.org:9931

   xrootd.monitor all \
                  auth \
                  flush 30s \
                  window 5s fstat 60 lfn ops xfr 5 \
                  dest redir fstat info user xrd-report.osgstorage.org:9930 \
                  dest fstat info files user pfc tcpmon ccm $(ShovelerHostPort)
fi
